Для налаштування плагіна **Gst-nvdspreprocess** у DeepStream 8.0 для нарізання вхідного кадру на 8 тайлів (ROI), вам потрібно виконати два основні кроки: налаштувати властивості самого GStreamer-елемента та створити спеціальний конфігураційний файл 1, 2\.  
Ось покрокова інструкція:

### 1\. Налаштування елемента в пайплайні

У вашому коді або при запуску через gst-launch, ви повинні вказати шлях до файлу конфігурації через властивість config-file:  
nvdspreprocess config-file=config\_preprocess.txt

### 2\. Створення файлу конфігурації (config\_preprocess.txt)

Згідно зі специфікаціями конфігураційних файлів для цього плагіна, файл має містити секції \[property\] та \[group-X\] 1, 2\.  
**Приклад налаштування для 8 тайлів 640x640:**  
\[property\]  
enable=1  
\# Унікальний ID nvinfer, якому передаються дані  
target-unique-ids=1  
\# Формат входу для нейромережі: \[batch\_size; c; h; w\]  
\# Оскільки у вас 8 тайлів, batch-size має бути мінімум 8  
network-input-shape=8;3;640;640  
\# Шлях до кастомної бібліотеки (зазвичай використовується стандартна з SDK)  
custom-lib-path=/opt/nvidia/deepstream/deepstream/lib/libnvds\_custom\_sequence\_preprocess.so  
custom-prepare-input-func=CustomSequencePreProcess

\[group-0\]  
src-ids=0  
\# Вказуємо тип процесингу (0 \- ROI)  
process-mode=0  
\# Визначення 8 областей (ROI) у форматі: left;top;width;height  
\# Координати для 1920x1080 (приклад розміщення тайлів):  
roi-params-src-0=0;0;640;640;640;0;640;640;1280;0;640;640;0;440;640;640;640;440;640;640;1280;440;640;640;0;640;640;640;640;640;640;640

### Деталі параметрів:

* **network-input-shape:** Перша цифра (8) вказує, що плагін сформує батч із 8 елементів. Це дозволяє YOLO v11 обробляти всі 8 тайлів за один прохід (якщо batch-size в nvinfer також встановлено на 8 або більше) 1\.  
* **roi-params-src-0:** Це найважливіший параметр. Ви перелічуєте через крапку з комою координати x;y;w;h для кожного з 8 тайлів. У прикладі вище перші три тайли йдуть по верхньому краю (0, 640, 1280 по X), а наступні — зі зміщенням по Y.  
* **process-mode=0:** Вказує плагіну, що потрібно вирізати області інтересу (ROI) 1\.

### Важливі зауваження для Jetson Orin NX:

* **Метадані:** Плагін автоматично додає інформацію про ці тайли в метадані NvDsBatchMeta, що дозволяє наступному плагіну (**Gst-nvinfer**) знати, які саме частини кадру він обробляє 1, 2\.  
* **Продуктивність:** Завдяки використанню NvBufSurface, нарізання відбувається ефективно в пам'яті Jetson без зайвого копіювання даних 3\.  
* **YOLO v11:** Переконайтеся, що в конфігураційному файлі вашого інференс-плагіна (nvinfer або nvinferserver) параметр input-from-preprocess-lib встановлено в 1, щоб він приймав тензори від nvdspreprocess, а не намагався масштабувати весь кадр самостійно 1\.

Ця конфігурація дозволить вам ефективно обробляти високу роздільну здатність камери Raspberry Pi, фокусуючи потужність Orin NX на конкретних тайлах 4\.  
